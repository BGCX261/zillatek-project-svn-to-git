<?phpclass Store_Controller extends Zend_Controller_Action{    public $username;    public $userId = 0;    public $userRole = "guest";    public $fullname = "";    public $cur_lang = "vi";    public $cur_module = "default";    public $translate;    public $cur_theme = "default";    public function init()    {        $this->getAuthentication();        $this->getTranslator();        $this->getLanguage();        $this->getTheme();        $menuFactory = new VC_Business_MenuFactory();        $listMenu = null;        if ($this->userId) {            $listMenu = $menuFactory->getMenuOfUser($this->userId);        }        $this->view->userMenu = $listMenu;    }    private function getTheme()    {        $this->view->cur_theme = $this->cur_theme;    }    private function getLanguage()    {        $nsLang = new Zend_Session_Namespace("Language");        $this->cur_lang = $nsLang->language;        $this->view->assign("cur_lang", $this->cur_lang);    }    private function getTranslator()    {        if (Zend_Registry::isRegistered("translate")) {            $this->translate = Zend_Registry::get("translate");            $this->view->translate = $this->translate;        }else{            throw new Zend_Exception('No translator registered', 403);        }    }    private function getAuthentication()    {        $auth = Zend_Auth::getInstance();        if ($auth->hasIdentity()) {            $storage = $auth->getIdentity();            $this->userRole = isset($storage->role) ? $storage->role : "guest";            $this->username = isset($storage->username) ? $storage->username : "";            $this->fullname = isset($storage->fullname) ? $storage->fullname : "";            $this->userId = isset($storage->userId) ? $storage->userId : "";       }       $this->view->userRole = $this->userRole;       $this->view->username = $this->username;       $this->view->fullname = $this->fullname;       $this->view->userId = $this->userId;    }}